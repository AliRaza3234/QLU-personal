import pytest
from main import app
from fastapi.testclient import TestClient


@pytest.fixture(scope="session")
def client():
    with TestClient(app) as c:
        yield c


def test_enhance_text(client):
    res = client.post(
        "/outreach/enhance_text",
        json={
            "channel": "linkedin_connect",
            "text": "Hi Cornia,\n\nHope you're well. I believe connecting with professionals like yourself can be mutually beneficial. I'd love to discuss potential collaboration opportunities or simply exchange insights about our industry.\n\nWould you be available for a brief chat sometime?\n\nBest regards,\nWahab",
            "attributes": {
                "receiver_data": {
                    "_source": {
                        "total_experience": 2030,
                        "currentCompanySize": None,
                        "experience": [
                            {
                                "title": "Software QA Engineer",
                                "description": "",
                                "company_name": "Nordstrom",
                                "location": "Remote",
                                "start": "9-2021",
                                "end": "",
                                "duration": "2 yrs 4 mos",
                                "urn": "urn:li:fsd_company:3379",
                                "logo": "https://storage.googleapis.com/qlu2-company-logos/nordstrom.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=6f119fbac55d57ecd8abda4b5f80c40c96eff512023c26a897d79ba3e25557860716dc5b1e632019eef521b2a07e0cb517110c6dc6acf3a1d485995488e9871f605a51efd76bbf69d3f8a2be07eb19711b7c434b3338712a082c35d5c5464a51d13a60524a4fcb1a2b25a06dd7e9dbfce5954ec7f81d9262812b5d7f51182d2b29c0078a5cfb675e6fa8a4104b505bba73404435e346368dada2cacc59fb9321fbe2a92dab4ed55c4c66d478a34d5788e219c2ce67d322908f8239297f9625a0500757ebe03c4b7a28a57f61294a576a6823d07090fd34fe03bf2d56d5bb23b0c60d2e78381c92dee2e7e590290b2d993c6333d762ae86efcfdd90d728aadcef",
                                "industries": ["Retail"],
                                "companyWebsite": "http://www.nordstrom.com",
                                "companyPageUrl": "https://www.linkedin.com/company/nordstrom/",
                                "companyType": "",
                                "companySize": None,
                                "companySpecialities": [""],
                                "companyDescription": "At Nordstrom, we empower our employees to set their sights high and blaze their own trails. This is a place where your success and growth are truly a result of your own efforts and achievements. \r\n\r\nOur teams are made up of motivated people who work hard to become leaders within the company, at all levels of the organization. These well-traveled paths show how hard work, loyalty, a competitive spirit and your unwavering commitment to the customer can take you and your career to new places.  \r\n\r\nIn addition to being a great place to have a career, we’re also committed to respecting the environment and supporting our communities. To learn more, check out NordstromCares.com.\r\n\r\nInterested in joining the Nordstrom team?  \r\n\r\nSee some of our current opportunities under our Careers tab or visit careers.nordstrom.com to apply today.",
                                "universalName": "nordstrom",
                                "exp_days": 849,
                                "li_locations": "",
                                "li_staffcount": 41761,
                                "index": 0,
                                "rank": 3,
                            },
                            {
                                "title": "QA Engineer",
                                "description": "",
                                "company_name": "JPMorgan Chase & Co.",
                                "location": "Remote",
                                "start": "8-2020",
                                "end": "9-2021",
                                "duration": "1 yr 2 mos",
                                "urn": "urn:li:fsd_company:1068",
                                "logo": "https://storage.googleapis.com/qlu2-company-logos/jpmorganchase_duplicate.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=6c8abe1fc4074e19cdef319cf4efa514280c978e1a68ba1b091214f31b26f818afbd702d96e396a6f8d354fade7e896c50307b3e6de40c42002084b39801900bd671d3df94008cf2c09882f92e64ff554c393031088c535b60d24829269e4f49d04a0a3d1c9807f4d163a0731ef0ecfa2864b0feae7d8d3b95c483aaf0f0aa0b183bab6d7e7756736086b55d53c482d5127f11aa3d8d16510c33170942e7fc576f72c030c266dc0ce4b20482be02dcdfe85300bb2e2c3fbc62cdc11fa212b936c7b26295be7565f0d8ac12c61b5fdedf2fd06cd502a0bd6053a91e2ed97aa6a0019a7b7084f48b80e499b7dafb26f0548d40457c3f194672085820469c9c0bab",
                                "industries": ["Financial Services"],
                                "companyWebsite": "",
                                "companyPageUrl": "",
                                "companyType": "",
                                "companySize": None,
                                "companySpecialities": [
                                    "Consumer & Community Banking",
                                    "Corporate and Investment Bank",
                                    "Asset Management",
                                    "Private Banking",
                                    "Commercial Banking",
                                ],
                                "companyDescription": "",
                                "universalName": "jpmorganchase_duplicate",
                                "exp_days": 424,
                                "li_locations": "",
                                "li_staffcount": [],
                                "index": 1,
                                "rank": 3,
                            },
                            {
                                "title": "Junior QA Engineer",
                                "description": "",
                                "company_name": "State Farm",
                                "location": "On-site",
                                "start": "8-2018",
                                "end": "8-2020",
                                "duration": "2 yrs 1 mo",
                                "urn": "urn:li:fsd_company:2381",
                                "logo": "https://storage.googleapis.com/qlu2-company-logos/state_farm.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=3ddc988ac6653cab5ed69c42cb4d585fbdcd1fe20286c658e47316b22790716eb5da3cda50ccf55884e6a4022d44c4252d4007d76b25b46bd892890842d32c0a5d31433065026ef7cab7cfe147564823ed115801e8d2729e8455385c2b4efa81431b99881febc016607f9851971b892a1be5e63f1696c5c12b16b602d05da0d9b4a8bdb7123370b05ae45af3da702bc7dacf78cb84d7b76e5d82686e599a66ac2892dd1c5b9f5f7a2079aa4b05d3317376c0850757a9ad508fdf0aaca64fae65788503a6249e5ba2ffa09e35a2e0c2cfaabebd79a298dac05689c603f75b481156993d06ad62ac009cf9580db6643a29c6098a400dbd2108991b4661fc230e72",
                                "industries": ["Insurance"],
                                "companyWebsite": "",
                                "companyPageUrl": "",
                                "companyType": "",
                                "companySize": 101356,
                                "companySpecialities": [
                                    "Insurance",
                                    "Financial Services",
                                    "Life Insurance",
                                    "Health Insurance",
                                    "Auto Insurance",
                                ],
                                "companyDescription": "",
                                "universalName": "state_farm",
                                "exp_days": 759,
                                "li_locations": "",
                                "li_staffcount": 101356,
                                "index": 2,
                                "rank": 2,
                            },
                        ],
                        "education": [
                            {
                                "start": "",
                                "degreeName": "Associate's degree",
                                "fieldOfStudy": "Liberal Arts and Sciences/Liberal Studies",
                                "schoolName": "LaGuardia Community College",
                                "index": 0,
                            }
                        ],
                        "publications": [],
                        "skills": [
                            "Microsoft Office",
                            "Microsoft Excel",
                            "Scrum",
                            "Manual testing",
                            "Regression Testing",
                            "Test Design",
                            "Selenium WebDriver",
                            "Attention to Detail",
                            "Agile Testing",
                            "Test Strategy",
                            "Web Applications",
                            "Software Development Life Cycle (SDLC)",
                            "Manual Testing",
                            "E2E",
                            "Teamwork",
                            "Functional Testing",
                            "Selenium Testing",
                            "REST APIs",
                            "Bug Tracking",
                            "Test Engineering",
                            "Test Automation",
                            "Software Quality Assurance",
                            "Software Testing",
                            "Selenium",
                            "Documentation",
                            "Test Planning",
                            "Test Cases",
                            "Software Development",
                            "Quality Control",
                            "Linux",
                            "Agile & Waterfall Methodologies",
                            "Postman API",
                            "Defect Tracking",
                            "Jira",
                            "Project Planning",
                            "Requirements Analysis",
                            "Customer Service",
                            "Customer Quality",
                            "Product Requirements",
                            "Test Automation Tools",
                            "QA Engineering",
                            "Python (Programming Language)",
                            "SQL",
                            "Windows",
                            "Communication",
                            "Quality Assurance",
                            "Computer Literacy",
                            "Agile Methodologies",
                            "Troubleshooting",
                            "Test Procedures",
                        ],
                        "alsoViewed": [],
                        "languages": [],
                        "publicIdentifier": "corina-perianu-465052284",
                        "industryCode": "",
                        "imageUrl": "https://storage.googleapis.com/qlu2-profile-images/corina-perianu-465052284.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110012Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=3ac7e1e413e4c0d7ca0bb483c239b0187b3eda071165b5c50e3739c229ad0c4d1631d6877930881cfeea8950cb8f1d7fed9edaefbd9bad377ba35aee3fbcfe58863443aa05168eb850d9d4aa179369f8a9ef34685bf4e79013387ba735243f79698c07c61ff7066030ee8db134367d35f02af85139de04b0b24a99ed28a3926bc5c63ecc76652bb00fe7911402fffd35220155262e6c9a660bc186ae9599dce824def6a3004939b4cf5af6bb3574455a23f807a67090a6c59882ad89a20a2801cb284586f5960d445dd7c8bdf1d40b869fd6a48cea9e7341365591e2fdebeb924d8aa33f71745b24a663f339d3be4072acf51d364af4c3f1079984f675aa735f",
                        "scrapeType": "DEEP",
                        "trackingId": "",
                        "locationName": "",
                        "postalCode": "",
                        "versionTag": "",
                        "schoolName": "LaGuardia Community College",
                        "fieldOfStudy": "Liberal Arts and Sciences/Liberal Studies",
                        "title": "Software QA Engineer",
                        "companyName": "Nordstrom",
                        "firstName": "Corina",
                        "lastName": "Perianu",
                        "fullName": "Corina Perianu",
                        "entityUrn": "urn:li:fsd_profile:ACoAAEUP5Q0BaKEHq0Wat9urkYyMbuAn-69hhHg",
                        "headline": "Quality Assurance Specialist @ Nordstrom | Quality Assurance Testing",
                        "summary": "",
                        "industry": "",
                        "locality": "United States",
                        "countryCode": "",
                        "phone_number": "",
                        "work_email": "",
                        "locationId": None,
                        "scrapePriority": "",
                        "isAssigned": False,
                        "currentCompanyWebsite": "http://www.nordstrom.com",
                        "companyLinkedinUrl": "https://www.linkedin.com/company/nordstrom/}",
                        "currentCompanySpecialties": "",
                        "currentCompanyName": "Nordstrom",
                        "currentCompanyIndustry": "Retail",
                        "profileUrl": "",
                        "prospectType": "",
                        "recruiterLink": "",
                        "collectedBy": "recruiter",
                        "primaryEmail": "",
                        "age": "",
                        "ageQ": "",
                        "gender": "",
                        "race": "",
                        "rank": 3,
                        "companySize": 43009,
                        "locationFullPath": "",
                        "metropoleArea": "",
                        "createdAtEs": "2023-12-22T07:59:59.309Z",
                        "createdAt": "2023-12-22T07:59:59.309Z",
                        "updatedAt": "2023-12-22T07:59:59.309Z",
                        "updatedAtEs": "2023-12-22T07:59:59.309Z",
                        "_id": "01HJ88KKKZAB8PR3CWWZJ1CDRS",
                    }
                },
                "metrics": {
                    "callToAction": "a.wahab@qlu.ai",
                    "relevance": False,
                    "call_to_action": False,
                    "follow-up_plan": True,
                    "professional_tone": False,
                    "value_proposition": False,
                    "introduction_clarity": True,
                },
            },
            "sender_name": "Wahab",
            "category": "networking",
        },
    )
    assert res.status_code == 200 and len(res.json()["message"]) <= 200


def test_get_label(client):
    res = client.post(
        "/outreach/gen_category",
        json={
            "text": "Hi Cornia,\n\nHope you're well. I believe connecting with professionals like yourself can be mutually beneficial. I'd love to discuss potential collaboration opportunities or simply exchange insights about our industry.\n\nWould you be available for a brief chat sometime?\n\nBest regards,\nWahab"
        },
    )

    assert res.status_code == 200


def test_gen_from_text_reference_linkedin(client):
    res = client.post(
        "/outreach/gen_from_text_reference",
        json={
            "companies": "",
            "contact": "",
            "links": "",
            "isPersonalised": True,
            "placeholderReference": "Hi Corina,\n\nHope you're well. With your extensive experience as a Software QA Engineer at Nordstrom and your previous roles at JPMorgan Chase & Co. and State Farm, I think I have a potential job role for you.\n\nI'd love to explore potential collaboration opportunities. Your background in quality assurance is impressive, Would you be available for a brief chat sometime? Please let me know a convenient time, or feel free to reach out to me directly at a.wahab@qlu.ai.\n\nBest regards,\nWahab",
            "profileSummary": "Kyle is a Senior Software QA Engineer with a strong focus on testing mail Engineering and have strong expertise in iOS, macOS and visionOS",
            "channel": "linkedin_connect",
            "profileData": {
                "_source": {
                    "total_experience": 6228,
                    "currentCompanySize": None,
                    "experience": [
                        {
                            "title": "Senior Software QA Engineer - Mail",
                            "start": "9-2016",
                            "end": "",
                            "duration": "7 yrs 6 mos",
                            "description": "• Embedded test engineer for the Mail Engineering team focused on iOS, macOS, and visionOS.\n• Directly responsible for manual test planning, writing, execution, and reporting for iOS, iPadOS, and visionOS Mail.\n• Extensively researched and documented internal support tools and resources utilized by engineering and quality teams throughout Apple.\n• Collaborated with software quality and engineering stakeholders across Apple on bring up and ongoing maintenance of numerous software and hardware projects associated with Mail.",
                            "company_name": "Apple",
                            "urn": "urn:li:fsd_company:162479",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/apple.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=06663472e7d8b8ac9cfe02d7dce267f705d9ce4821e2ceae6155950114ab48af25e1d3ac916f1233ab3c650f0d3bc82fd88854dd9e23d5334b689a8fe1fd1d7d3bc78b0ee19ae8fa1921b4d2fad32f88b43c2b6581179534708b4aaa72cc8be31316832fb38dc2f87a89eb5a94e2742c7875b525127d04dc17c3e8d24198e1d63978266b47a7b9d05a5573e9aee693e7d924d6a8f36ad340743bac2f67afe70d0e63a4f459f994d91dc317c896ab7d6e14573b3ef1015961f43810c2d160dd55fa756eeb2f388194b183bc9a167ff100b2eef94fdeb88ae83271ec88f43b6908e85c277e5229da53834b143cdcaf29cff4efe8c4390400508dcf1ebacfdd1a09",
                            "location": "Cupertino, California",
                            "industries": ["Consumer Electronics"],
                            "companyWebsite": "http://www.apple.com/careers",
                            "companyPageUrl": "https://www.linkedin.com/company/apple/",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [
                                "Innovative Product Development",
                                "World-Class Operations",
                                "Retail",
                                "Telephone Support",
                            ],
                            "companyDescription": "We’re a diverse collective of thinkers and doers, continually reimagining what’s possible to help us all do what we love in new ways. And the same innovation that goes into our products also applies to our practices — strengthening our commitment to leave the world better than we found it. This is where your work can make a difference in people’s lives. Including your own.\n\nApple is an equal opportunity employer that is committed to inclusion and diversity. Visit apple.com/careers to learn more.",
                            "universalName": "apple",
                            "exp_days": 2734,
                            "li_locations": "",
                            "li_staffcount": 267423,
                            "index": 0,
                            "rank": 4,
                        },
                        {
                            "title": "Software QA Engineer - iOS Applications QA",
                            "start": "3-2014",
                            "end": "9-2016",
                            "duration": "2 yrs 7 mos",
                            "description": "• Member of a cross-functional team of Quality Assurance engineers focused on iOS systems and applications for iPhone and iPad. \n• Directly responsible for manual test planning, writing, execution, and reporting for iOS Calendar and Reminders.\n• Pioneered and facilitated a lockstep test planning methodology that seamlessly integrates with existing internal tools.\n• Supported a wide variety of QA projects and teams across Software Engineering including: build quality, user acceptance testing, release validation, hardware, watchOS, and Music.",
                            "company_name": "Apple",
                            "urn": "urn:li:fsd_company:162479",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/apple.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=06663472e7d8b8ac9cfe02d7dce267f705d9ce4821e2ceae6155950114ab48af25e1d3ac916f1233ab3c650f0d3bc82fd88854dd9e23d5334b689a8fe1fd1d7d3bc78b0ee19ae8fa1921b4d2fad32f88b43c2b6581179534708b4aaa72cc8be31316832fb38dc2f87a89eb5a94e2742c7875b525127d04dc17c3e8d24198e1d63978266b47a7b9d05a5573e9aee693e7d924d6a8f36ad340743bac2f67afe70d0e63a4f459f994d91dc317c896ab7d6e14573b3ef1015961f43810c2d160dd55fa756eeb2f388194b183bc9a167ff100b2eef94fdeb88ae83271ec88f43b6908e85c277e5229da53834b143cdcaf29cff4efe8c4390400508dcf1ebacfdd1a09",
                            "location": "Cupertino, California",
                            "industries": ["Consumer Electronics"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 267423,
                            "companySpecialities": [
                                "Innovative Product Development",
                                "World-Class Operations",
                                "Retail",
                                "Telephone Support",
                            ],
                            "companyDescription": "",
                            "universalName": "apple",
                            "exp_days": 939,
                            "li_locations": "",
                            "li_staffcount": 267423,
                            "index": 1,
                            "rank": 3,
                        },
                        {
                            "title": "Genius",
                            "start": "11-2012",
                            "end": "3-2014",
                            "duration": "1 yr 5 mos",
                            "description": "• Apple Certified Macintosh Technician providing hardware and software troubleshooting and repair.\n• Achieved over 90% Net Promoter Score (NPS) since promotion to the role. \n• Promoted less than 1 year on the job. \n• Scored above 90% on all hardware and software certification exams for Apple Certified Mac Technicians.",
                            "company_name": "Apple",
                            "urn": "urn:li:fsd_company:162479",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/apple.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=06663472e7d8b8ac9cfe02d7dce267f705d9ce4821e2ceae6155950114ab48af25e1d3ac916f1233ab3c650f0d3bc82fd88854dd9e23d5334b689a8fe1fd1d7d3bc78b0ee19ae8fa1921b4d2fad32f88b43c2b6581179534708b4aaa72cc8be31316832fb38dc2f87a89eb5a94e2742c7875b525127d04dc17c3e8d24198e1d63978266b47a7b9d05a5573e9aee693e7d924d6a8f36ad340743bac2f67afe70d0e63a4f459f994d91dc317c896ab7d6e14573b3ef1015961f43810c2d160dd55fa756eeb2f388194b183bc9a167ff100b2eef94fdeb88ae83271ec88f43b6908e85c277e5229da53834b143cdcaf29cff4efe8c4390400508dcf1ebacfdd1a09",
                            "location": "Cupertino, California",
                            "industries": ["Consumer Electronics"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 267423,
                            "companySpecialities": [
                                "Innovative Product Development",
                                "World-Class Operations",
                                "Retail",
                                "Telephone Support",
                            ],
                            "companyDescription": "",
                            "universalName": "apple",
                            "exp_days": 514,
                            "li_locations": "",
                            "li_staffcount": 267423,
                            "index": 2,
                            "rank": 1,
                        },
                        {
                            "title": "Ticket Support Engineer",
                            "start": "5-2013",
                            "end": "10-2013",
                            "duration": "6 mos",
                            "description": "• Selected as the first Career Experience (CE) supporting Internal Systems & Technology’s Retail Systems (ISTRS) Worldwide Tier Two Ticket Support Team.  \n• Performed Remote Desktop Support using a variety of tools including Apple Remote Desktop, SSH, Bash & Shell Scripting, Casper Imaging, and ACMT-driven hardware & software troubleshooting.  \n• Managed team’s ongoing Production Support ticket bucket, prioritizing looper or aging tickets to deliver timely resolution. \n• Developed first draft of team’s Policies & Procedures, overseeing its peer review process of management across ISTRS’ global team.",
                            "company_name": "Apple",
                            "urn": "urn:li:fsd_company:162479",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/apple.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=06663472e7d8b8ac9cfe02d7dce267f705d9ce4821e2ceae6155950114ab48af25e1d3ac916f1233ab3c650f0d3bc82fd88854dd9e23d5334b689a8fe1fd1d7d3bc78b0ee19ae8fa1921b4d2fad32f88b43c2b6581179534708b4aaa72cc8be31316832fb38dc2f87a89eb5a94e2742c7875b525127d04dc17c3e8d24198e1d63978266b47a7b9d05a5573e9aee693e7d924d6a8f36ad340743bac2f67afe70d0e63a4f459f994d91dc317c896ab7d6e14573b3ef1015961f43810c2d160dd55fa756eeb2f388194b183bc9a167ff100b2eef94fdeb88ae83271ec88f43b6908e85c277e5229da53834b143cdcaf29cff4efe8c4390400508dcf1ebacfdd1a09",
                            "location": "Cupertino, California",
                            "industries": ["Consumer Electronics"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 267423,
                            "companySpecialities": [
                                "Innovative Product Development",
                                "World-Class Operations",
                                "Retail",
                                "Telephone Support",
                            ],
                            "companyDescription": "",
                            "universalName": "apple",
                            "exp_days": 179,
                            "li_locations": "",
                            "li_staffcount": 267423,
                            "index": 3,
                            "rank": 3,
                        },
                        {
                            "title": "Family Room Specialist",
                            "start": "11-2011",
                            "end": "11-2012",
                            "duration": "1 yr 1 mo",
                            "description": "• Specialist of the Family Room at the Apple Retail Store - Easton Town Center.  \n• Mobile-certified technician offering Apple handheld device support and repair.\n• Facilitator of Data Transfers for customers migrating data to their new Apple computer.\n• Instructor for One to One customers, delivering course-driven training on iPhone, iPad, Mac, iTunes, and iCloud.\n• Trainer for new Family Room Specialists.",
                            "company_name": "Apple",
                            "urn": "urn:li:fsd_company:162479",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/apple.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=06663472e7d8b8ac9cfe02d7dce267f705d9ce4821e2ceae6155950114ab48af25e1d3ac916f1233ab3c650f0d3bc82fd88854dd9e23d5334b689a8fe1fd1d7d3bc78b0ee19ae8fa1921b4d2fad32f88b43c2b6581179534708b4aaa72cc8be31316832fb38dc2f87a89eb5a94e2742c7875b525127d04dc17c3e8d24198e1d63978266b47a7b9d05a5573e9aee693e7d924d6a8f36ad340743bac2f67afe70d0e63a4f459f994d91dc317c896ab7d6e14573b3ef1015961f43810c2d160dd55fa756eeb2f388194b183bc9a167ff100b2eef94fdeb88ae83271ec88f43b6908e85c277e5229da53834b143cdcaf29cff4efe8c4390400508dcf1ebacfdd1a09",
                            "location": "Cupertino, California",
                            "industries": ["Consumer Electronics"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 267423,
                            "companySpecialities": [
                                "Innovative Product Development",
                                "World-Class Operations",
                                "Retail",
                                "Telephone Support",
                            ],
                            "companyDescription": "",
                            "universalName": "apple",
                            "exp_days": 394,
                            "li_locations": "",
                            "li_staffcount": 267423,
                            "index": 4,
                            "rank": 5,
                        },
                        {
                            "title": "Treasurer",
                            "description": "• Creative Manager and consultant to merchandising, marketing, public relations, and operations.\n• Credited songwriter on independent works for artists managed.\n• Chief Financial Officer responsible for maintaing company books as well as keeping in financial compliance of state and federal law.",
                            "company_name": "Gibson Road Entertainment Group LLC",
                            "location": "Columbus, Ohio",
                            "start": "4-2008",
                            "end": "12-2012",
                            "duration": "4 yrs 9 mos",
                            "urn": "",
                            "logo": "",
                            "industries": [],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [],
                            "companyDescription": "",
                            "universalName": "",
                            "exp_days": 1729,
                            "li_locations": None,
                            "li_staffcount": None,
                            "index": 5,
                            "rank": 9,
                        },
                        {
                            "title": "Supervisor",
                            "description": "• Keyholder of LEGO Brand Retail Store, leading staff of as many as 5 employees through a multitude of daily store operations including sales, customer service, opening, closing, and shipment.\n• Promoted to the position of Supervisor within 4 months of hire.\n• Coordinated relocation of product to a new storage facility to maximize efficiency of product movement.\n• Developed and implemented sales floor positioning policy that resulted in a 30% increase in mystery shop scores as acting floor leader.",
                            "company_name": "LEGO Group",
                            "location": "Columbus, Ohio",
                            "start": "7-2009",
                            "end": "11-2011",
                            "duration": "2 yrs 5 mos",
                            "urn": "urn:li:fsd_company:3724",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/lego-group.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=331ccf32d78cc4b8dadc77855451fb20e7e383bf9cb3fc4b695e2b698bfb8b6d703301709cbcf24cd21e4ef816ad0891f08884d341ea2c5238bd0f259f48fe5d0d79c25bede97f9d392f1f7c83b4e40af8f6989622167bc4993fa2e86e64a388bc4dd81a35fa86a1c8cf4c9b5536386794fa81bcec53fe6332f68cdfab5fd447388dd488c38790a26cf5c3b1c52d079ad6bf4c23cd105362f88be49d64d68403252c9ccc998ea6b55af514f34f1ee584af2b150b4f19e2986c20aafc271db7eceb6678f7be417dcd847d11d77c06fbec7a437e0fed25013830d238ea302925fc435d0210e1463a404cb49df7df7a558f6007645a1f29016e15d7eee80703eedd",
                            "industries": ["Consumer Goods"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 16891,
                            "companySpecialities": [
                                "LEGO Bricks",
                                "Educational concepts",
                                "Consumer Experiences",
                                "Digital Play Experiences",
                                "Learning-through-Play",
                                "Creativity",
                                "Imagination",
                            ],
                            "companyDescription": "",
                            "universalName": "lego-group",
                            "exp_days": 879,
                            "li_locations": "",
                            "li_staffcount": 16891,
                            "index": 6,
                            "rank": 6,
                        },
                        {
                            "title": "Intern",
                            "description": "• Intern for the State of Ohio's Windows Support Services staff.\n• Designed and Implemented a detailed inventory system to track server inventory quicker than established methods.\n• Performed server and desktop maintenance on hardware, software, and communication functions of supported technologies.",
                            "company_name": "State of Ohio Office of Information Technology",
                            "location": "Columbus, Ohio",
                            "start": "9-2007",
                            "end": "4-2009",
                            "duration": "1 yr 8 mos",
                            "urn": "",
                            "logo": "",
                            "industries": [],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [],
                            "companyDescription": "",
                            "universalName": "",
                            "exp_days": 604,
                            "li_locations": None,
                            "li_staffcount": None,
                            "index": 7,
                            "rank": 1,
                        },
                    ],
                    "education": [
                        {
                            "start": "2004",
                            "end": "2008",
                            "degreeName": "Human Ecology",
                            "fieldOfStudy": "Consumer Science",
                            "schoolName": "The Ohio State University",
                            "index": 0,
                        }
                    ],
                    "publications": [],
                    "skills": [
                        "iOS",
                        "OS X",
                        "iPhone",
                        "iPad",
                        "Software Quality Assurance",
                        "Quality Assurance",
                        "QA Engineering",
                        "Test Planning",
                        "Regression Testing",
                        "Customer Service",
                        "Management",
                        "Computer Repair",
                        "Apple Certified",
                        "Brand Management",
                        "Marketing",
                        "Terminal",
                        "Unix",
                        "Apple Certified Macintosh Technician",
                        "Project Management",
                        "IT Security Policies",
                        "Software Project Management",
                        "iCloud",
                        "iTunes",
                        "Feature Testing",
                        "Mac",
                    ],
                    "alsoViewed": [],
                    "languages": [],
                    "publicIdentifier": "kylelochbaum",
                    "industryCode": "",
                    "imageUrl": "https://storage.googleapis.com/qlu2-profile-images/kylelochbaum.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110012Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=a588490785d592944fae70dd4bfc624e44f619d510ffe9f50da2a72b1a9169a108f0fe045e2eab2521498c72d3d7d69e88455dc34b042250245c969f02d96fbb8dac8d3747a97859813fb61cf2d7c7613d03bd87dcde59f1afd7cc145d5725e27512cee4fb9a0b165823cb8dacf8e6b2314a1a3de75c837328e455ed361d810c237aa0a559e4a8f772c4877ec60450d0281661c8d9ba81dd7dc4651c875ca5d7b8ea071ad10b6f4e9d7a6dd2519f6bd6cef52a7de55dd71d28137b0afe4b947d44c58eaadc0457368b3ded0b09c1db904d640a3f733068cce68ea1ec519097fb95fe6f8898b8e0df3743c92efa92b70d1219a0a61ef7af531b9abeb998dfa856",
                    "scrapeType": "DEEP",
                    "trackingId": "",
                    "locationName": "",
                    "postalCode": "",
                    "versionTag": "",
                    "schoolName": "The Ohio State University",
                    "fieldOfStudy": "Consumer Science",
                    "title": "Senior Software QA Engineer - Mail",
                    "companyName": "Apple",
                    "firstName": "Kyle",
                    "lastName": "Lochbaum",
                    "fullName": "Kyle Lochbaum",
                    "entityUrn": "urn:li:fsd_profile:ACoAAAGHh4ABRla8BbcKQUAZsJwkeSdTcJyTAdc",
                    "headline": "Senior Software QA Engineer at Apple",
                    "summary": "Experienced Senior Software Quality Assurance Engineer with a demonstrated history of working in the consumer electronics industry. Strong quality assurance professional skilled in iOS/macOS/watchOS, Test Planning, and Regression Testing.",
                    "industry": "",
                    "locality": "United States",
                    "countryCode": "",
                    "phone_number": "",
                    "work_email": "",
                    "locationId": None,
                    "scrapePriority": "",
                    "isAssigned": False,
                    "currentCompanyWebsite": "http://www.apple.com/careers",
                    "companyLinkedinUrl": "https://www.linkedin.com/company/apple/}",
                    "currentCompanySpecialties": "Innovative Product Development, World-Class Operations, Retail, Telephone Support",
                    "currentCompanyName": "Apple",
                    "currentCompanyIndustry": "Consumer Electronics",
                    "profileUrl": "",
                    "prospectType": "",
                    "recruiterLink": "",
                    "collectedBy": "recruiter",
                    "primaryEmail": "",
                    "age": 39,
                    "ageQ": 38,
                    "gender": "female",
                    "race": "White",
                    "rank": 1,
                    "companySize": 168743,
                    "followerCount": 393,
                    "connectionCount": 392,
                    "locationFullPath": "",
                    "metropoleArea": "",
                    "createdAtEs": "2024-02-02T11:05:16.423Z",
                    "createdAt": "2024-02-02T11:05:16.423Z",
                    "updatedAt": "2024-02-02T11:05:16.423Z",
                    "updatedAtEs": "2024-02-02T11:05:16.423Z",
                    "_id": "01HG89QQT73PKEX9FC84V17SG4",
                }
            },
            "reference": "Hi Corina,\n\nHope you're well. With your extensive experience as a Software QA Engineer at Nordstrom and your previous roles at JPMorgan Chase & Co. and State Farm, I think I have a potential job role for you.\n\nI'd love to explore potential collaboration opportunities. Your background in quality assurance is impressive, Would you be available for a brief chat sometime? Please let me know a convenient time, or feel free to reach out to me directly at a.wahab@qlu.ai.\n\nBest regards,\nWahab",
            "sender_name": "Wahab",
            "category": "recruiting",
            "text": [],
            "receiver_name": "Kyle",
            "subject": "Connecting for Potential Collaboration",
        },
    )

    assert res.status_code == 200


def test_modify_response(client):
    res = client.post(
        "/outreach/modify_response",
        json={
            "text": "Dear Ms. Perianu,\n\nGiven your extensive experience in QA, I believe a discussion could be mutually beneficial. Would you be available for a brief conversation at your convenience?\n\nYou can reach me at a.wahab@qlu.ai.\n\nSincerely,\nWahab",
            "mod_type": "simpler",
            "channel": "email",
            "receiver_name": "Corina Perianu",
            "sender_name": "Wahab",
        },
    )

    assert res.status_code == 200


def test_gen_metrics(client):
    res = client.post(
        "/outreach/gen_metrics",
        json={
            "text": "Hi Corina,\n\nYou've got a lot of experience in QA, and I think it would be great for us to chat. Are you free for a quick talk sometime?\n\nYou can email me at a.wahab@qlu.ai.\n\nBest,\nWahab",
            "category": "networking",
        },
    )
    assert res.status_code == 200
    assert "metrics" in res.json() and "thresholds" in res.json()


def test_gen_scores(client):
    res = client.post(
        "/outreach/gen_scores",
        json={
            "text": "Hey, your profile seems interesting, lets connect",
            "category": "networking",
            "metrics": {
                "Relevance": "Determine how well the text establishes the relevance of the connection. This includes highlighting mutual interests, shared connections, or common goals.",
                "Call to Action": "Evaluate the clarity and effectiveness of the invitation or request for the recipient to respond or take action. This could be a request for a meeting, a call, or a follow-up conversation.",
                "Follow-Up Plan": "Determine if the text includes a clear plan for follow-up communication. This could be a proposed date for a meeting or a promise to reach out again within a specific timeframe.",
                "Professional Tone": "Assess the appropriateness of the language and tone used in the message. It should be formal, respectful, and professional.",
                "Value Proposition": "Examine how effectively the text communicates the potential benefits or value of the connection for both parties. This could include opportunities for collaboration, knowledge sharing, or mutual support.",
                "Introduction Clarity": "Evaluate how clearly and concisely the sender introduces themselves and their purpose for reaching out. This includes providing relevant background information and context.",
            },
        },
    )
    assert res.status_code == 200
    assert "scores" in res.json()


def test_sentiment_analysis(client):
    res = client.post(
        "/outreach/sentiment_analysis",
        json={
            "context": "Hi Aneeq,I hope you're doing well. I wanted to follow up on my previous message regarding the exciting opportunity we have for a Full Stack Engineer. Your impressive work at QLU.ai and your expertise in React, Django, and Agile methodologies make you an ideal candidate.I believe this role could be a fantastic next step in your career. Could we schedule a time to discuss this further?Looking forward to your response.Best regards,Wahab",
            "text": "Hi Josh,\n\nThank you for reaching out. While I appreciate the recognition of my experience, I am quite concerned about the demanding workload and tight deadlines you mentioned. Work-life balance is a priority for me, and I am hesitant to take on a role that might compromise this.\n\nGiven these concerns, I'm not interested in this opportunity is the right fit for me at this time.\n\nBest regards,\nWahab",
            "texts": [
                {"Sender": "This is a sample message please reply as interested"},
                {"Receiver": "I am interested"},
            ],
        },
    )
    assert res.status_code == 200


def test_gen_sample_follow_up(client):
    res = client.post(
        "/outreach/gen_sample_follow_up",
        json={
            "channel": "linkedin_message",
            "text": [
                "Hi Salman,\n\nI believe connecting with professionals like yourself can be mutually beneficial. I'd love to discuss potential collaboration opportunities or simply exchange insights about our industry.\n\nWould you be available for a brief chat sometime next week? If so, please let me know a convenient time, or feel free to reach out to me directly at a.wahab@qlu.ai.\n\nBest regards,  \nWahab"
            ],
            "reference": "Hi Salman,\n\nI believe connecting with professionals like yourself can be mutually beneficial. I'd love to discuss potential collaboration opportunities or simply exchange insights about our industry.\n\nWould you be available for a brief chat sometime next week? If so, please let me know a convenient time, or feel free to reach out to me directly at a.wahab@qlu.ai.\n\nBest regards,  \nWahab",
            "sender_name": "Wahab",
            "receiver_name": "Muhammad",
            "profileData": {
                "_source": {
                    "total_experience": 988,
                    "currentCompanySize": None,
                    "experience": [
                        {
                            "title": "Product Designer",
                            "description": "Skills: Product Design · Software Development",
                            "company_name": "QLU.ai",
                            "location": "Karachi  · On-site",
                            "start": "1-2024",
                            "end": "",
                            "duration": "3 mos",
                            "urn": "urn:li:fsd_company:79063531",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/qlu-ai.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112748Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=88064d86f6bffbf0b4e95e6735df9922dbb7f956d08eb313d814fa81f3cba1f10d1fd7f3543df8a869c0381732afdfde9c790ff0bd3513e073e3a33b89c0867c9cedf350c0e6bb8cba8a0200c236a5defd9e79383aeaa63c4068d782e8353e9ac1c7337b4fa966f8b4fb91a850f17dca4a74e7a0c3c22229bcfaff798c376667dff57fdba3579203b65162323f14a2823c5750d5ae53230bf07cfe02b5dc0b61c90eaabe993b9c672626f771942e3cc884376a7df2f9522ffbbc9fde31575c61b47ff69b968388164d743e7ec45e6d81e5e37e6852969307290b7de6308c77833093d41170351f0541e431e386ac0db1d7c1cb4334a3f796096d2ba66303beed",
                            "industries": ["Computer Software"],
                            "companyWebsite": "http://www.qlu.ai",
                            "companyPageUrl": "https://www.linkedin.com/company/qlu-ai/",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [
                                "Artificial Intelligence",
                                "Recruitment",
                                "Automation",
                                "NLP",
                            ],
                            "companyDescription": "QLU intelligently automates prospect research and outreach for executive and tech recruiters. It leverages the power of AI and Natural Language Processing to interpret any hiring requirement and generate the best candidates out of millions—in 5 mins. 100% Recall- Meaning QLU will find every single best candidate and 100% Precision- Meaning all of QLU's recommended prospects will be bull's eye prospects.",
                            "universalName": "qlu-ai",
                            "exp_days": 89,
                            "li_locations": "",
                            "li_staffcount": 35,
                            "index": 0,
                        },
                        {
                            "title": "Creative Designer",
                            "description": "",
                            "company_name": "Talha & Co.",
                            "location": "Remote",
                            "start": "9-2023",
                            "end": "1-2024",
                            "duration": "5 mos",
                            "urn": "urn:li:fsd_company:10426406",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/talha-%26-co-.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112748Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=16a8b698ddb0da1b4a727bc81afcf1b45e4aeb76e73e903d823a528ea3a68e9b16395e23b01eb80f28811ad7ad0fb7a3201c476ad9779f9239bbc43e00583d5900bf77d1a77e062030ac88ec911ce31c7599dc58891149f5a2047023169a28b8387f5fdbff3e7954f3dd1aa95826d2be1be0de6f0d12aaae89f96ea642d2d3b77b9efeb642e77d41fc165c95e67c13c14ad3e07b1e48c892f452450140f7ede84badd0d1ce9dff48d46fe672cb6b61851cf7a288b6ddfa71ea088da711d64f7a11b79266e5900fd4d3798778ecfd0cbb42a2812639a511eb6bbac5f2e9a934ce943537bad8837ef7a7b5ebe2ec30315fb4c765c7db07dc643537a77df39c8244",
                            "industries": ["Accounting"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [
                                "Accounting",
                                "Audit",
                                "Outsourcing",
                                "Finance",
                                "Tax",
                                "Advisory",
                            ],
                            "companyDescription": "",
                            "universalName": "talha-&-co-",
                            "exp_days": 149,
                            "li_locations": "",
                            "li_staffcount": [],
                            "index": 1,
                        },
                        {
                            "title": "Graphic Designer",
                            "description": "",
                            "company_name": "Upwork",
                            "location": "Pakistan",
                            "start": "11-2021",
                            "end": "4-2023",
                            "duration": "1 yr 6 mos",
                            "urn": "urn:li:fsd_company:4827017",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/upwork.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112748Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=37b8c43713a28f036aa6fc71548765f330cfb885962878289c8ac556f8e9036fb03b154d6f4ce62485107120b748c4bfb2b257e7f2d95de48808947c03a5d494fd97f62becab1fd07b4d9fbc6ba923201abf57c5ca6aa1822e068cd40deb440b5d0319f18e66ba543beef3058f26df7ca7ed0764b4ce3d381e3e04a96d0dda6a5534f75e26fdd679f45108c9fd9d436dd2358b7c8bde27b4d76fc2cb7739ce6a6a439a31e373102a971e24545e4f6ed9a7e6c0e6bff26a7a5a4b96387a7e1e922203233e1eccd01749a8bd979bd65435f1d215cc9f8abe79a1d12da1a759b180b894735ad173b16458df5e04dc2a6e92cdc2e09b6f6eed22526efa2165ac85db",
                            "industries": ["Computer Software"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 105899,
                            "companySpecialities": ["freelancers", "agencies"],
                            "companyDescription": "",
                            "universalName": "upwork",
                            "exp_days": 544,
                            "li_locations": "",
                            "li_staffcount": 105899,
                            "index": 2,
                        },
                        {
                            "title": "Graphic Designer",
                            "description": "Skills: Branding & Identity · Branding · Graphic Design · Adobe Photoshop · Adobe Illustrator · Typography",
                            "company_name": "Afiniti",
                            "location": "Pakistan · Hybrid",
                            "start": "8-2021",
                            "end": "11-2021",
                            "duration": "4 mos",
                            "urn": "urn:li:fsd_company:10378992",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/afiniti-com.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112748Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=740cd7ee16b9e96a9a7d39f8510490048938145365b07d207a016cc3f0b757e159b27f08058f8411802b7a56661e4999266efd0dd689c711cac5b4d432a7b564f54367db1d19914449fd7c01c62ac7810c5a7b3ffd5aa87ee7befbdb9bc59010d10c4bab87e871d18a06b80dc236f4719595c47c85b0c54ee3273304d2efb70b135bb7d77526837fee29b186fd24e05498a5356d944bc123521bf418bcb79d75f57385f423aefe861d2b1bb5c6ff39c909302b7277a388aab9476a3b511a3e6222a183dc62a47e19898cd90c480b98be786006a9f7a22faf814cb6caa3b22e7e8ce415e01e79e82bcdad57c1169941ba7c4edb59ecde359b4d6394d541904874",
                            "industries": ["Computer Software"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 1916,
                            "companySpecialities": [
                                "Big Data ",
                                "Cognitive Computing",
                                "Satisfaction Optimization",
                                "Bayesian Analytics",
                            ],
                            "companyDescription": "",
                            "universalName": "afiniti-com",
                            "exp_days": 119,
                            "li_locations": "",
                            "li_staffcount": 1916,
                            "index": 3,
                        },
                        {
                            "title": "Graphic Designer",
                            "description": "• Led and implemented end-to-end creative development for social media platforms like Facebook, Instagram, and LinkedIn with the objective being to increase brand awareness and digital presence increasing the number of posts shared by the organization's social media platforms by 47%.\n• Prepared daily social media posts with the primary focus being to enhance social media engagement bringing 35% month-on-month growth in likes and views.\n• Synergized with cross-functional teams for upcoming social media projects for clients to ensure timely development of targets and transparent communication of expectations to stakeholders.",
                            "company_name": "KRL Creatives",
                            "location": "Pakistan",
                            "start": "5-2020",
                            "end": "7-2020",
                            "duration": "3 mos",
                            "urn": "urn:li:fsd_company:13245975",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/krl-creatives.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112748Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=533d727cf6725fd0184e1737e3f1c06e5c3cdfe42a718491d4f38f15415a899163e71502dd0faae50001ba0ed70e8b1322a843bbcfd2abd6c283eb026807ca7ece5cb2b1f83fe780c2b60e7e14da65f2111b44141ced7eb517c0047aae27a6e339457d3e46342124be457508dd7b4ad9aeac59806403bde15f333518a7d0a35fca87673d4802c94ecda934bec2b4547a64265e406db1c6d58e9eb112c56c7cba2d4b87f28cf0eef72b850bba2b94e1035c13954c80fb53b2ca47f8b71057113b90d48ecbcb718152d12ee480aa32fb9ffe2c7829f1085c35f95b37f80f89430fcb523f82da060544814537eb726a3512f606b5587bd1490155c891da81acb016",
                            "industries": ["Marketing & Advertising"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [
                                "Software House",
                                "Production",
                                "Content Development",
                                "Marketing",
                                "Outdoor advertisement",
                                "Digital Marketing",
                                "Creative Designing",
                            ],
                            "companyDescription": "",
                            "universalName": "krl-creatives",
                            "exp_days": 89,
                            "li_locations": "",
                            "li_staffcount": [],
                            "index": 4,
                        },
                    ],
                    "education": [
                        {
                            "start": "Jul 2023",
                            "end": "Nov 2023",
                            "degreeName": "Apprentice",
                            "fieldOfStudy": "Ui/Ux Design",
                            "schoolName": "Institute of Emerging Careers",
                            "index": 0,
                        },
                        {
                            "start": "",
                            "degreeName": "",
                            "schoolName": "Sir Syed University of Engineering & Technology (SSUET)",
                            "index": 1,
                        },
                    ],
                    "publications": [],
                    "skills": [
                        "Software Development",
                        "Product Design",
                        "User-centered Design",
                        "Branding & Identity",
                        "Branding",
                        "Typography",
                        "Figma (Software)",
                        "UX Research",
                        "Wireframing",
                        "Affinity Map",
                        "Empathy Mapping",
                        "User Personas",
                        "User Journeys",
                        "Graphic Design",
                        "User Experience (UX)",
                        "User Interface Design",
                        "Graphics",
                        "Design",
                        "Interaction Design",
                        "Web Design",
                        "User Experience Design (UED)",
                        "Motion Graphics",
                        "Video Editing",
                        "Art",
                        "Art Direction",
                        "Video Production",
                        "Editing",
                        "Digital Media",
                        "Information Technology",
                        "Adobe XD",
                        "Prototyping",
                        "Adobe Illustrator",
                        "Canva",
                        "Adobe Premiere Pro",
                        "After Effects",
                        "Microsoft Word",
                        "Adobe Photoshop",
                        "Adobe InDesign",
                        "User Interface Prototyping",
                        "Graphic Illustrations",
                    ],
                    "alsoViewed": [],
                    "languages": [],
                    "publicIdentifier": "msalmanhere",
                    "industryCode": "",
                    "imageUrl": "https://storage.googleapis.com/qlu2-profile-images/msalmanhere.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T112747Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=7b74f9e92e7d4384bbd2e89bd2589548087fbe7ae9abb4d85579d0f6cde2830de2fe5af1b4e5effa033543b00febadabc99dd7aeecfc6685c9428ef208ef1e01528698c6f88510a0f62f3e165670a987e566d2248c5fa19f3064e922e64d1fd8d11996394657294335769b8a3e57cfef144a8c58bca3ddaeeeab9c32c861e9d4b1a8a832d7d07b4de8e679d560ce995cd0ae95d78ec2cea9775b82cb10dcc3effbcfe07b349a88f9ab5a634069c8cc1a7064a1852d34b4410ea7ad3566b35a6e21e189cdc02141170491be83186f2a2c1fa073c0771bda626a3e9f0bfa70300e086b5d9268c1bc5e095ca8c233313ed23597c7189787e05bd9a8917e4b906db9",
                    "scrapeType": "DEEP",
                    "trackingId": "",
                    "locationName": "Pakistan",
                    "postalCode": "",
                    "versionTag": "",
                    "schoolName": "Institute of Emerging Careers",
                    "fieldOfStudy": "Ui/Ux Design",
                    "title": "Product Designer",
                    "companyName": "QLU.ai",
                    "firstName": "Muhammad",
                    "lastName": "Salman",
                    "fullName": "Muhammad Salman",
                    "entityUrn": "urn:li:fsd_profile:ACoAAB18SLABvlytZXZ9fxlf2gToiQIp_wbOYok",
                    "headline": "Product Designer | Ex-Afiniti",
                    "summary": "A self-taught UI/UX designer based in Karachi, Pakistan who loves branding and supports it by emotional and effective visuals. I started my career as a designer to solve problems through well-defined and growth-oriented content strategies. However, over the years, I've also begun to engage with what started as a hobby and has evolved into my passion - UI/UX Design.\n\nHuge believer of team work, always keen to expand and seek out opportunities to improve my skills and develop as an Individual.",
                    "industry": "",
                    "locality": "Karachi Division, Sindh, Pakistan",
                    "countryCode": "",
                    "phone_number": "",
                    "work_email": "",
                    "locationId": None,
                    "scrapePriority": "",
                    "isAssigned": False,
                    "currentCompanyWebsite": "http://www.qlu.ai",
                    "companyLinkedinUrl": "https://www.linkedin.com/company/qlu-ai/}",
                    "currentCompanySpecialties": "Artificial Intelligence, Recruitment, Automation, NLP",
                    "currentCompanyName": "QLU.ai",
                    "currentCompanyIndustry": "Computer Software",
                    "profileUrl": "",
                    "prospectType": "",
                    "recruiterLink": "",
                    "collectedBy": "recruiter",
                    "primaryEmail": "",
                    "age": 26,
                    "ageQ": 28,
                    "gender": "female",
                    "race": "Asian",
                    "rank": 1,
                    "companySize": 43,
                    "followerCount": 1556,
                    "connectionCount": 1453,
                    "locationFullPath": "Karachi Division, Sindh, Pakistan, Pakistan",
                    "metropoleArea": "",
                    "location_continent": "Asia",
                    "createdAtEs": "2024-03-18T05:27:34.005Z",
                    "createdAt": "2024-03-18T05:27:34.005Z",
                    "updatedAt": "2024-03-18T05:27:34.005Z",
                    "updatedAtEs": "2024-03-18T05:27:34.005Z",
                    "_id": "01HS80F1H4Q0PZAMEF8DT12CEM",
                }
            },
        },
    )
    assert res.status_code == 200


def test_gen_sample_text(client):
    res = client.post(
        "/outreach/gen_sample_text",
        json={
            "channel": "email",
            "profileData": {
                "_source": {
                    "total_experience": 2030,
                    "currentCompanySize": None,
                    "experience": [
                        {
                            "title": "Software QA Engineer",
                            "description": "",
                            "company_name": "Nordstrom",
                            "location": "Remote",
                            "start": "9-2021",
                            "end": "",
                            "duration": "2 yrs 4 mos",
                            "urn": "urn:li:fsd_company:3379",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/nordstrom.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=6f119fbac55d57ecd8abda4b5f80c40c96eff512023c26a897d79ba3e25557860716dc5b1e632019eef521b2a07e0cb517110c6dc6acf3a1d485995488e9871f605a51efd76bbf69d3f8a2be07eb19711b7c434b3338712a082c35d5c5464a51d13a60524a4fcb1a2b25a06dd7e9dbfce5954ec7f81d9262812b5d7f51182d2b29c0078a5cfb675e6fa8a4104b505bba73404435e346368dada2cacc59fb9321fbe2a92dab4ed55c4c66d478a34d5788e219c2ce67d322908f8239297f9625a0500757ebe03c4b7a28a57f61294a576a6823d07090fd34fe03bf2d56d5bb23b0c60d2e78381c92dee2e7e590290b2d993c6333d762ae86efcfdd90d728aadcef",
                            "industries": ["Retail"],
                            "companyWebsite": "http://www.nordstrom.com",
                            "companyPageUrl": "https://www.linkedin.com/company/nordstrom/",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [""],
                            "companyDescription": "At Nordstrom, we empower our employees to set their sights high and blaze their own trails. This is a place where your success and growth are truly a result of your own efforts and achievements. \r\n\r\nOur teams are made up of motivated people who work hard to become leaders within the company, at all levels of the organization. These well-traveled paths show how hard work, loyalty, a competitive spirit and your unwavering commitment to the customer can take you and your career to new places.  \r\n\r\nIn addition to being a great place to have a career, we’re also committed to respecting the environment and supporting our communities. To learn more, check out NordstromCares.com.\r\n\r\nInterested in joining the Nordstrom team?  \r\n\r\nSee some of our current opportunities under our Careers tab or visit careers.nordstrom.com to apply today.",
                            "universalName": "nordstrom",
                            "exp_days": 849,
                            "li_locations": "",
                            "li_staffcount": 41761,
                            "index": 0,
                            "rank": 3,
                        },
                        {
                            "title": "QA Engineer",
                            "description": "",
                            "company_name": "JPMorgan Chase & Co.",
                            "location": "Remote",
                            "start": "8-2020",
                            "end": "9-2021",
                            "duration": "1 yr 2 mos",
                            "urn": "urn:li:fsd_company:1068",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/jpmorganchase_duplicate.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=6c8abe1fc4074e19cdef319cf4efa514280c978e1a68ba1b091214f31b26f818afbd702d96e396a6f8d354fade7e896c50307b3e6de40c42002084b39801900bd671d3df94008cf2c09882f92e64ff554c393031088c535b60d24829269e4f49d04a0a3d1c9807f4d163a0731ef0ecfa2864b0feae7d8d3b95c483aaf0f0aa0b183bab6d7e7756736086b55d53c482d5127f11aa3d8d16510c33170942e7fc576f72c030c266dc0ce4b20482be02dcdfe85300bb2e2c3fbc62cdc11fa212b936c7b26295be7565f0d8ac12c61b5fdedf2fd06cd502a0bd6053a91e2ed97aa6a0019a7b7084f48b80e499b7dafb26f0548d40457c3f194672085820469c9c0bab",
                            "industries": ["Financial Services"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": None,
                            "companySpecialities": [
                                "Consumer & Community Banking",
                                "Corporate and Investment Bank",
                                "Asset Management",
                                "Private Banking",
                                "Commercial Banking",
                            ],
                            "companyDescription": "",
                            "universalName": "jpmorganchase_duplicate",
                            "exp_days": 424,
                            "li_locations": "",
                            "li_staffcount": [],
                            "index": 1,
                            "rank": 3,
                        },
                        {
                            "title": "Junior QA Engineer",
                            "description": "",
                            "company_name": "State Farm",
                            "location": "On-site",
                            "start": "8-2018",
                            "end": "8-2020",
                            "duration": "2 yrs 1 mo",
                            "urn": "urn:li:fsd_company:2381",
                            "logo": "https://storage.googleapis.com/qlu2-company-logos/state_farm.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110014Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=3ddc988ac6653cab5ed69c42cb4d585fbdcd1fe20286c658e47316b22790716eb5da3cda50ccf55884e6a4022d44c4252d4007d76b25b46bd892890842d32c0a5d31433065026ef7cab7cfe147564823ed115801e8d2729e8455385c2b4efa81431b99881febc016607f9851971b892a1be5e63f1696c5c12b16b602d05da0d9b4a8bdb7123370b05ae45af3da702bc7dacf78cb84d7b76e5d82686e599a66ac2892dd1c5b9f5f7a2079aa4b05d3317376c0850757a9ad508fdf0aaca64fae65788503a6249e5ba2ffa09e35a2e0c2cfaabebd79a298dac05689c603f75b481156993d06ad62ac009cf9580db6643a29c6098a400dbd2108991b4661fc230e72",
                            "industries": ["Insurance"],
                            "companyWebsite": "",
                            "companyPageUrl": "",
                            "companyType": "",
                            "companySize": 101356,
                            "companySpecialities": [
                                "Insurance",
                                "Financial Services",
                                "Life Insurance",
                                "Health Insurance",
                                "Auto Insurance",
                            ],
                            "companyDescription": "",
                            "universalName": "state_farm",
                            "exp_days": 759,
                            "li_locations": "",
                            "li_staffcount": 101356,
                            "index": 2,
                            "rank": 2,
                        },
                    ],
                    "education": [
                        {
                            "start": "",
                            "degreeName": "Associate's degree",
                            "fieldOfStudy": "Liberal Arts and Sciences/Liberal Studies",
                            "schoolName": "LaGuardia Community College",
                            "index": 0,
                        }
                    ],
                    "publications": [],
                    "skills": [
                        "Microsoft Office",
                        "Microsoft Excel",
                        "Scrum",
                        "Manual testing",
                        "Regression Testing",
                        "Test Design",
                        "Selenium WebDriver",
                        "Attention to Detail",
                        "Agile Testing",
                        "Test Strategy",
                        "Web Applications",
                        "Software Development Life Cycle (SDLC)",
                        "Manual Testing",
                        "E2E",
                        "Teamwork",
                        "Functional Testing",
                        "Selenium Testing",
                        "REST APIs",
                        "Bug Tracking",
                        "Test Engineering",
                        "Test Automation",
                        "Software Quality Assurance",
                        "Software Testing",
                        "Selenium",
                        "Documentation",
                        "Test Planning",
                        "Test Cases",
                        "Software Development",
                        "Quality Control",
                        "Linux",
                        "Agile & Waterfall Methodologies",
                        "Postman API",
                        "Defect Tracking",
                        "Jira",
                        "Project Planning",
                        "Requirements Analysis",
                        "Customer Service",
                        "Customer Quality",
                        "Product Requirements",
                        "Test Automation Tools",
                        "QA Engineering",
                        "Python (Programming Language)",
                        "SQL",
                        "Windows",
                        "Communication",
                        "Quality Assurance",
                        "Computer Literacy",
                        "Agile Methodologies",
                        "Troubleshooting",
                        "Test Procedures",
                    ],
                    "alsoViewed": [],
                    "languages": [],
                    "publicIdentifier": "corina-perianu-465052284",
                    "industryCode": "",
                    "imageUrl": "https://storage.googleapis.com/qlu2-profile-images/corina-perianu-465052284.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcs-developerl-local%40ghori-aya.iam.gserviceaccount.com%2F20240724%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20240724T110012Z&X-Goog-Expires=604800&X-Goog-SignedHeaders=host&X-Goog-Signature=3ac7e1e413e4c0d7ca0bb483c239b0187b3eda071165b5c50e3739c229ad0c4d1631d6877930881cfeea8950cb8f1d7fed9edaefbd9bad377ba35aee3fbcfe58863443aa05168eb850d9d4aa179369f8a9ef34685bf4e79013387ba735243f79698c07c61ff7066030ee8db134367d35f02af85139de04b0b24a99ed28a3926bc5c63ecc76652bb00fe7911402fffd35220155262e6c9a660bc186ae9599dce824def6a3004939b4cf5af6bb3574455a23f807a67090a6c59882ad89a20a2801cb284586f5960d445dd7c8bdf1d40b869fd6a48cea9e7341365591e2fdebeb924d8aa33f71745b24a663f339d3be4072acf51d364af4c3f1079984f675aa735f",
                    "scrapeType": "DEEP",
                    "trackingId": "",
                    "locationName": "",
                    "postalCode": "",
                    "versionTag": "",
                    "schoolName": "LaGuardia Community College",
                    "fieldOfStudy": "Liberal Arts and Sciences/Liberal Studies",
                    "title": "Software QA Engineer",
                    "companyName": "Nordstrom",
                    "firstName": "Corina",
                    "lastName": "Perianu",
                    "fullName": "Corina Perianu",
                    "entityUrn": "urn:li:fsd_profile:ACoAAEUP5Q0BaKEHq0Wat9urkYyMbuAn-69hhHg",
                    "headline": "Quality Assurance Specialist @ Nordstrom | Quality Assurance Testing",
                    "summary": "",
                    "industry": "",
                    "locality": "United States",
                    "countryCode": "",
                    "phone_number": "",
                    "work_email": "",
                    "locationId": None,
                    "scrapePriority": "",
                    "isAssigned": False,
                    "currentCompanyWebsite": "http://www.nordstrom.com",
                    "companyLinkedinUrl": "https://www.linkedin.com/company/nordstrom/}",
                    "currentCompanySpecialties": "",
                    "currentCompanyName": "Nordstrom",
                    "currentCompanyIndustry": "Retail",
                    "profileUrl": "",
                    "prospectType": "",
                    "recruiterLink": "",
                    "collectedBy": "recruiter",
                    "primaryEmail": "",
                    "age": "",
                    "ageQ": "",
                    "gender": "",
                    "race": "",
                    "rank": 3,
                    "companySize": 43009,
                    "locationFullPath": "",
                    "metropoleArea": "",
                    "createdAtEs": "2023-12-22T07:59:59.309Z",
                    "createdAt": "2023-12-22T07:59:59.309Z",
                    "updatedAt": "2023-12-22T07:59:59.309Z",
                    "updatedAtEs": "2023-12-22T07:59:59.309Z",
                    "_id": "01HJ88KKKZAB8PR3CWWZJ1CDRS",
                }
            },
            "reference": "Hi Cornia,\n\nHope you're well. I believe connecting with professionals like yourself can be mutually beneficial. I'd love to discuss potential collaboration opportunities or simply exchange insights about our industry.\n\nWould you be available for a brief chat sometime? Please let me know a convenient time, or feel free to reach out to me directly at a.wahab@qlu.ai.\n\nBest regards,\nWahab",
            "sender_name": "Wahab",
            "text": [],
            "category": "networking",
            "receiver_name": "Corina",
        },
    )

    assert res.status_code == 200
